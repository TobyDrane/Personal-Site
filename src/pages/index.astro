---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const isDev = import.meta.env.DEV;

const posts = (await getCollection('blog', ({ data }) => {
  return isDev || !data.draft;
})).sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Toby Drane" description="AI Engineer building LLM and agentic systems. Writing about AI, engineering, and technology.">
  <h1 class="text-3xl font-semibold tracking-tight mb-8 text-gray-900 dark:text-gray-100">
    Toby Drane
  </h1>

  <div class="mb-10 space-y-5 text-gray-600 dark:text-gray-400 leading-relaxed">
    <p>
      AI Engineer at <a href="https://granola.so" class="link-bio">Granola</a>, heading up the development of LLM and agentic capabilities.
    </p>
    <p>
      Previously, I was founding engineer at Atla AI (YC23), where we researched and fine-tuned evaluation models for agentic applications to detect and improve upon failure modes.
    </p>
    <p>
      I have a BSc in Computer Science and an MSc in Data Science and Machine Learning.
    </p>
  </div>

  {posts.length > 0 && (
    <section>
      <h2 class="text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100">Writing</h2>
      <ul class="space-y-3">
        {posts.map((post) => (
          <li class="flex items-center gap-3 group">
            <span class="text-gray-400 dark:text-gray-600 transition-transform duration-150 group-hover:translate-x-1 group-hover:text-gray-600 dark:group-hover:text-gray-400">â†’</span>
            <a href={`/blog/${post.slug}`} class="post-link">{post.data.title}</a>
            {post.data.draft && (
              <span class="text-xs px-2 py-0.5 rounded-full bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 font-medium">Draft</span>
            )}
          </li>
        ))}
      </ul>
    </section>
  )}
</BaseLayout>
